{% extends 'layouts/admin_mains.html' %}

{% block title %} Dashboard For Bank Users {% endblock title %}
<!-- Specific CSS goes HERE -->
{% block stylesheets %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
  integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade Form</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
{% endblock stylesheets %}

{% block content %}
<div class="main-panel">
    <div class="content-wrapper">
        <div class="row">
            <div class="col-lg-12 grid-margin">
                <div class="card">
                    <div class="card-body">
                        <div class="container mt-5">
                            <div class="form-group col-md-12">
                                <h5>Slot for Each Classes</h5>
                            </div>
                            <form action="/std_slot" method="POST" id="gradeForm">
                                <div class="form-row">
                                    <div class="form-group col-md-4">
                                        <label for="class7">Class 7:</label>
                                        <input type="text" class="form-control" name="class7" id="class7" required/>
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label for="class8">Class 8:</label>
                                        <input type="text" class="form-control" name="class8" id="class8" required />
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label for="class9">Class 9:</label>
                                        <input type="text" class="form-control" name="class9" id="class9" required />
                                    </div>
                                </div>
                                <hr>
                                <div class="form-row">
                                    <div class="form-group col-md-4">
                                        <label for="class10">Class 10:</label>
                                        <input type="text" class="form-control" name="class10" id="class10" required />
                                    </div>
                                </div>
                                <hr>    
                                <!-- Class 11 Arts, Commerce, Science Inputs -->
                                <div class="form-row">
                                    <div class="form-group col-md-12">
                                        <h6>Class 11</h6>
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label for="class11Arts">Class 11 Arts:</label>
                                        <input type="text" class="form-control" name="class11Arts" id="class11Arts" required />
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label for="class11Commerce">Class 11 Com:</label>
                                        <input type="text" class="form-control" name="class11Commerce" id="class11Commerce" required />
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label for="class11Science">Class 11 Sci:</label>
                                        <input type="text" class="form-control" name="class11Science" id="class11Science" required />
                                    </div>
                                </div>
                                <hr>    
                                <!-- Class 12 Arts, Commerce, Science Inputs -->
                                <div class="form-row">
                                    <div class="form-group col-md-12">
                                        <h6>Class 12</h6>
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label for="class12Arts">Class 12 Arts:</label>
                                        <input type="text" class="form-control" name="class12Arts" id="class12Arts" required />
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label for="class12Commerce">Class 12 Com:</label>
                                        <input type="text" class="form-control" name="class12Commerce" id="class12Commerce" required />
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label for="class12Science">Class 12 Sci:</label>
                                        <input type="text" class="form-control" name="class12Science" id="class12Science" required/>
                                    </div>
                                </div>

                                <!-- Submit button -->
                                <button type="submit" class="btn btn-primary d-block mx-auto" onclick="stdslot()" >Submit</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            </div>
            </div>
            </div>



{% endblock content %}

{% block javascripts %}
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>

<script>
    $(document).ready(function () {
        // Add validation rules to your form
        $("#gradeForm").validate({
            rules: {
                class7: {
                    required: true,
                    maxlength: 255
                },
                class8: {
                    required: true,
                    maxlength: 255
                },
                class9: {
                    required: true,
                    maxlength: 255
                },
                class10: {
                    required: true,
                    maxlength: 255
                },
                class11Arts: {
                    required: true,
                    maxlength: 255
                },
                class11Commerce: {
                    required: true,
                    maxlength: 255
                },
                class11Science: {
                    required: true,
                    maxlength: 255
                },
                class12Arts: {
                    required: true,
                    maxlength: 255
                },
                class12Commerce: {
                    required: true,
                    maxlength: 255
                },
                class12Science: {
                    required: true,
                    maxlength: 255
                }
            },
            messages: {
                // Customize error messages if needed
            },
            errorClass: "text-danger", // Set the error text color to red
            highlight: function (element, errorClass, validClass) {
                $(element).addClass(errorClass).removeClass(validClass);
            },
            submitHandler: function (form) {
                // When the form is valid, proceed with the AJAX request
                stdslot();
            }
        });
    });

    function stdslot() {
    // Collect form data
    var formData = {
        class7: $('#class7').val(),
        class8: $('#class8').val(),
        class9: $('#class9').val(),
        class10: $('#class10').val(),
        class11_Arts: $('#class11Arts').val(),
        class11_Com: $('#class11Commerce').val(),
        class11_Sci: $('#class11Science').val(),
        class12_Arts: $('#class12Arts').val(),
        class12_Com: $('#class12Commerce').val(),
        class12_Sci: $('#class12Science').val(),
    };

    // Send AJAX request to Flask endpoint
    $.ajax({
        type: 'POST',
        url: '/std_slot',
        data: formData,
        success: function (response) {
            if (response === 'Error') {
                // If the response is 'Error', show an error message using the 'swal' library
                swal("Data already exists", "Information submission failed", "error")
                    .then(function () {
                        // You can handle what happens after the user clicks "Ok"
                    });
            } else {
                // If the response is not 'Error', show a success message
                // toastr.success('Slot added successfully');
                // Redirect to the specified URL
                window.location.href = "/slot-list";
            }
        },
        error: function (error) {
            // Handle error
            console.error('Error submitting form:', error);
        }
    });
}
</script>



{% endblock javascripts %}